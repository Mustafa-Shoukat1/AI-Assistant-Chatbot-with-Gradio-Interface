import{I as Ze,C as xe}from"./Index-p668Ffoz.js";import{B as et}from"./BlockLabel-CeTEM5TI.js";import{I as tt}from"./Image-Bsh8Umrh.js";import{W as nt,S as lt}from"./SelectSource-iVejN69G.js";import{g as it}from"./utils-Gtzs_Zla.js";import{D as Ke}from"./DropdownArrow-Do0TGVBT.js";import{p as rt}from"./index-BKm0EBOh.js";import{f as ot}from"./Button-6TkjCjn0.js";import{U as at}from"./Upload-ClF7T3gH.js";/* empty css                                                   */import{I as st}from"./Image-CSX6hYj2.js";const{SvelteComponent:ct,append:Ue,attr:T,detach:ut,init:_t,insert:ft,noop:$e,safe_not_equal:dt,svg_element:Ie}=window.__gradio__svelte__internal;function mt(i){let e,t,n;return{c(){e=Ie("svg"),t=Ie("path"),n=Ie("circle"),T(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),T(n,"cx","12"),T(n,"cy","13"),T(n,"r","4"),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"width","100%"),T(e,"height","100%"),T(e,"viewBox","0 0 24 24"),T(e,"fill","none"),T(e,"stroke","currentColor"),T(e,"stroke-width","1.5"),T(e,"stroke-linecap","round"),T(e,"stroke-linejoin","round"),T(e,"class","feather feather-camera")},m(l,r){ft(l,e,r),Ue(e,t),Ue(e,n)},p:$e,i:$e,o:$e,d(l){l&&ut(e)}}}class gt extends ct{constructor(e){super(),_t(this,e,null,mt,dt,{})}}const{SvelteComponent:ht,append:pt,attr:O,detach:bt,init:vt,insert:wt,noop:ye,safe_not_equal:kt,svg_element:je}=window.__gradio__svelte__internal;function $t(i){let e,t;return{c(){e=je("svg"),t=je("circle"),O(t,"cx","12"),O(t,"cy","12"),O(t,"r","10"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"width","100%"),O(e,"height","100%"),O(e,"viewBox","0 0 24 24"),O(e,"stroke-width","1.5"),O(e,"stroke-linecap","round"),O(e,"stroke-linejoin","round"),O(e,"class","feather feather-circle")},m(n,l){wt(n,e,l),pt(e,t)},p:ye,i:ye,o:ye,d(n){n&&bt(e)}}}class It extends ht{constructor(e){super(),vt(this,e,null,$t,kt,{})}}const{SvelteComponent:yt,append:Ct,attr:U,detach:qt,init:St,insert:Dt,noop:Ce,safe_not_equal:Et,svg_element:Ne}=window.__gradio__svelte__internal;function Wt(i){let e,t;return{c(){e=Ne("svg"),t=Ne("rect"),U(t,"x","3"),U(t,"y","3"),U(t,"width","18"),U(t,"height","18"),U(t,"rx","2"),U(t,"ry","2"),U(e,"xmlns","http://www.w3.org/2000/svg"),U(e,"width","100%"),U(e,"height","100%"),U(e,"viewBox","0 0 24 24"),U(e,"stroke-width","1.5"),U(e,"stroke-linecap","round"),U(e,"stroke-linejoin","round"),U(e,"class","feather feather-square")},m(n,l){Dt(n,e,l),Ct(e,t)},p:Ce,i:Ce,o:Ce,d(n){n&&qt(e)}}}class zt extends yt{constructor(e){super(),St(this,e,null,Wt,Et,{})}}const{SvelteComponent:Mt,append:ie,attr:qe,create_component:Bt,destroy_component:Rt,detach:Tt,element:Se,init:Ut,insert:jt,listen:Nt,mount_component:Lt,noop:At,safe_not_equal:Ht,set_style:Ot,space:Pt,text:Ft,transition_in:Vt,transition_out:Gt}=window.__gradio__svelte__internal,{createEventDispatcher:Jt}=window.__gradio__svelte__internal;function Kt(i){let e,t,n,l,r,o="Click to Access Webcam",f,s,g,a;return l=new nt({}),{c(){e=Se("button"),t=Se("div"),n=Se("span"),Bt(l.$$.fragment),r=Pt(),f=Ft(o),qe(n,"class","icon-wrap svelte-qbrfs"),qe(t,"class","wrap svelte-qbrfs"),qe(e,"class","svelte-qbrfs"),Ot(e,"height","100%")},m(_,w){jt(_,e,w),ie(e,t),ie(t,n),Lt(l,n,null),ie(t,r),ie(t,f),s=!0,g||(a=Nt(e,"click",i[1]),g=!0)},p:At,i(_){s||(Vt(l.$$.fragment,_),s=!0)},o(_){Gt(l.$$.fragment,_),s=!1},d(_){_&&Tt(e),Rt(l),g=!1,a()}}}function Qt(i){const e=Jt();return[e,()=>e("click")]}class Xt extends Mt{constructor(e){super(),Ut(this,e,Qt,Kt,Ht,{})}}function Yt(){return navigator.mediaDevices.enumerateDevices()}function Zt(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Le(i,e,t){const n={width:{ideal:1920},height:{ideal:1440}},l={video:t?{deviceId:{exact:t},...n}:n,audio:i};return navigator.mediaDevices.getUserMedia(l).then(r=>(Zt(r,e),r))}function xt(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:en,action_destroyer:tn,add_render_callback:nn,append:F,attr:y,binding_callbacks:ln,check_outros:ee,create_component:Q,create_in_transition:rn,destroy_component:X,destroy_each:on,detach:N,element:A,empty:Be,ensure_array_like:Ae,flush:V,group_outros:te,init:an,insert:L,listen:_e,mount_component:Y,noop:Re,run_all:sn,safe_not_equal:cn,set_data:Qe,set_input_value:Ee,set_style:un,space:ne,stop_propagation:_n,text:Xe,toggle_class:re,transition_in:S,transition_out:z}=window.__gradio__svelte__internal,{createEventDispatcher:fn,onMount:dn}=window.__gradio__svelte__internal;function He(i,e,t){const n=i.slice();return n[31]=e[t],n}function mn(i){let e,t,n,l,r,o,f,s,g,a,_;const w=[pn,hn],I=[];function M(p,k){return p[1]==="video"||p[0]?0:1}n=M(i),l=I[n]=w[n](i);let d=!i[8]&&Oe(i),v=i[10]&&i[7]&&Pe(i);return{c(){e=A("div"),t=A("button"),l.c(),o=ne(),d&&d.c(),f=ne(),v&&v.c(),s=Be(),y(t,"aria-label",r=i[1]==="image"?"capture photo":"start recording"),y(t,"class","svelte-1aa1mud"),y(e,"class","button-wrap svelte-1aa1mud")},m(p,k){L(p,e,k),F(e,t),I[n].m(t,null),F(e,o),d&&d.m(e,null),L(p,f,k),v&&v.m(p,k),L(p,s,k),g=!0,a||(_=_e(t,"click",i[13]),a=!0)},p(p,k){let $=n;n=M(p),n===$?I[n].p(p,k):(te(),z(I[$],1,1,()=>{I[$]=null}),ee(),l=I[n],l?l.p(p,k):(l=I[n]=w[n](p),l.c()),S(l,1),l.m(t,null)),(!g||k[0]&2&&r!==(r=p[1]==="image"?"capture photo":"start recording"))&&y(t,"aria-label",r),p[8]?d&&(te(),z(d,1,1,()=>{d=null}),ee()):d?(d.p(p,k),k[0]&256&&S(d,1)):(d=Oe(p),d.c(),S(d,1),d.m(e,null)),p[10]&&p[7]?v?(v.p(p,k),k[0]&1152&&S(v,1)):(v=Pe(p),v.c(),S(v,1),v.m(s.parentNode,s)):v&&(te(),z(v,1,1,()=>{v=null}),ee())},i(p){g||(S(l),S(d),S(v),g=!0)},o(p){z(l),z(d),z(v),g=!1},d(p){p&&(N(e),N(f),N(s)),I[n].d(),d&&d.d(),v&&v.d(p),a=!1,_()}}}function gn(i){let e,t,n,l;return t=new Xt({}),t.$on("click",i[20]),{c(){e=A("div"),Q(t.$$.fragment),y(e,"title","grant webcam access"),un(e,"height","100%")},m(r,o){L(r,e,o),Y(t,e,null),l=!0},p:Re,i(r){l||(S(t.$$.fragment,r),r&&(n||nn(()=>{n=rn(e,ot,{delay:100,duration:200}),n.start()})),l=!0)},o(r){z(t.$$.fragment,r),l=!1},d(r){r&&N(e),X(t)}}}function hn(i){let e,t,n;return t=new gt({}),{c(){e=A("div"),Q(t.$$.fragment),y(e,"class","icon svelte-1aa1mud"),y(e,"title","capture photo")},m(l,r){L(l,e,r),Y(t,e,null),n=!0},p:Re,i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&N(e),X(t)}}}function pn(i){let e,t,n,l;const r=[vn,bn],o=[];function f(s,g){return s[8]?0:1}return e=f(i),t=o[e]=r[e](i),{c(){t.c(),n=Be()},m(s,g){o[e].m(s,g),L(s,n,g),l=!0},p(s,g){let a=e;e=f(s),e!==a&&(te(),z(o[a],1,1,()=>{o[a]=null}),ee(),t=o[e],t||(t=o[e]=r[e](s),t.c()),S(t,1),t.m(n.parentNode,n))},i(s){l||(S(t),l=!0)},o(s){z(t),l=!1},d(s){s&&N(n),o[e].d(s)}}}function bn(i){let e,t,n;return t=new It({}),{c(){e=A("div"),Q(t.$$.fragment),y(e,"class","icon red svelte-1aa1mud"),y(e,"title","start recording")},m(l,r){L(l,e,r),Y(t,e,null),n=!0},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&N(e),X(t)}}}function vn(i){let e,t,n;return t=new zt({}),{c(){e=A("div"),Q(t.$$.fragment),y(e,"class","icon red svelte-1aa1mud"),y(e,"title","stop recording")},m(l,r){L(l,e,r),Y(t,e,null),n=!0},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){l&&N(e),X(t)}}}function Oe(i){let e,t,n,l,r;return t=new Ke({}),{c(){e=A("button"),Q(t.$$.fragment),y(e,"class","icon svelte-1aa1mud"),y(e,"aria-label","select input source")},m(o,f){L(o,e,f),Y(t,e,null),n=!0,l||(r=_e(e,"click",i[21]),l=!0)},p:Re,i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){z(t.$$.fragment,o),n=!1},d(o){o&&N(e),X(t),l=!1,r()}}}function Pe(i){let e,t,n,l,r,o,f;n=new Ke({});function s(_,w){return _[6].length===0?kn:wn}let g=s(i),a=g(i);return{c(){e=A("select"),t=A("button"),Q(n.$$.fragment),l=ne(),a.c(),y(t,"class","inset-icon svelte-1aa1mud"),y(e,"class","select-wrap svelte-1aa1mud"),y(e,"aria-label","select source")},m(_,w){L(_,e,w),F(e,t),Y(n,t,null),F(t,l),a.m(e,null),r=!0,o||(f=[_e(t,"click",_n(i[22])),tn(Te.call(null,e,i[14])),_e(e,"change",i[11])],o=!0)},p(_,w){g===(g=s(_))&&a?a.p(_,w):(a.d(1),a=g(_),a&&(a.c(),a.m(e,null)))},i(_){r||(S(n.$$.fragment,_),r=!0)},o(_){z(n.$$.fragment,_),r=!1},d(_){_&&N(e),X(n),a.d(),o=!1,sn(f)}}}function wn(i){let e,t=Ae(i[6]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Fe(He(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Be()},m(l,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(l,r);L(l,e,r)},p(l,r){if(r[0]&192){t=Ae(l[6]);let o;for(o=0;o<t.length;o+=1){const f=He(l,t,o);n[o]?n[o].p(f,r):(n[o]=Fe(f),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(l){l&&N(e),on(n,l)}}}function kn(i){let e,t=i[3]("common.no_devices")+"",n;return{c(){e=A("option"),n=Xe(t),e.__value="",Ee(e,e.__value),y(e,"class","svelte-1aa1mud")},m(l,r){L(l,e,r),F(e,n)},p(l,r){r[0]&8&&t!==(t=l[3]("common.no_devices")+"")&&Qe(n,t)},d(l){l&&N(e)}}}function Fe(i){let e,t=i[31].label+"",n,l,r,o;return{c(){e=A("option"),n=Xe(t),l=ne(),e.__value=r=i[31].deviceId,Ee(e,e.__value),e.selected=o=i[7].deviceId===i[31].deviceId,y(e,"class","svelte-1aa1mud")},m(f,s){L(f,e,s),F(e,n),F(e,l)},p(f,s){s[0]&64&&t!==(t=f[31].label+"")&&Qe(n,t),s[0]&64&&r!==(r=f[31].deviceId)&&(e.__value=r,Ee(e,e.__value)),s[0]&192&&o!==(o=f[7].deviceId===f[31].deviceId)&&(e.selected=o)},d(f){f&&N(e)}}}function $n(i){let e,t,n,l,r,o;const f=[gn,mn],s=[];function g(a,_){return a[9]?1:0}return l=g(i),r=s[l]=f[l](i),{c(){e=A("div"),t=A("video"),n=ne(),r.c(),y(t,"class","svelte-1aa1mud"),re(t,"flip",i[2]),re(t,"hide",!i[9]),y(e,"class","wrap svelte-1aa1mud")},m(a,_){L(a,e,_),F(e,t),i[19](t),F(e,n),s[l].m(e,null),o=!0},p(a,_){(!o||_[0]&4)&&re(t,"flip",a[2]),(!o||_[0]&512)&&re(t,"hide",!a[9]);let w=l;l=g(a),l===w?s[l].p(a,_):(te(),z(s[w],1,1,()=>{s[w]=null}),ee(),r=s[l],r?r.p(a,_):(r=s[l]=f[l](a),r.c()),S(r,1),r.m(e,null))},i(a){o||(S(r),o=!0)},o(a){z(r),o=!1},d(a){a&&N(e),i[19](null),s[l].d()}}}function Te(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function In(i,e,t){let n,l=[],r=null,o,{streaming:f=!1}=e,{pending:s=!1}=e,{root:g=""}=e,{mode:a="image"}=e,{mirror_webcam:_}=e,{include_audio:w}=e,{i18n:I}=e,{upload:M}=e;const d=fn();dn(()=>o=document.createElement("canvas"));const v=async m=>{const P=m.target.value;await Le(w,n,P).then(async Z=>{E=Z,t(7,r=l.find(x=>x.deviceId===P)||null),t(10,H=!1)})};async function p(){try{Le(w,n).then(async m=>{t(9,W=!0),t(6,l=await Yt()),E=m}).then(()=>xt(l)).then(m=>{t(6,l=m);const B=E.getTracks().map(P=>P.getSettings()?.deviceId)[0];t(7,r=B&&m.find(P=>P.deviceId===B)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&d("error",I("image.no_webcam_support"))}catch(m){if(m instanceof DOMException&&m.name=="NotAllowedError")d("error",I("image.allow_webcam_access"));else throw m}}function k(){var m=o.getContext("2d");(!f||f&&$)&&n.videoWidth&&n.videoHeight&&(o.width=n.videoWidth,o.height=n.videoHeight,m.drawImage(n,0,0,n.videoWidth,n.videoHeight),_&&(m.scale(-1,1),m.drawImage(n,-n.videoWidth,0)),o.toBlob(B=>{d(f?"stream":"capture",B)},"image/png",.8))}let $=!1,D=[],E,b,u;function h(){if($){u.stop();let m=new Blob(D,{type:b}),B=new FileReader;B.onload=async function(P){if(P.target){let Z=new File([m],"sample."+b.substring(6));const x=await rt([Z]);let ke=(await M(x,g))?.filter(Boolean)[0];d("capture",ke),d("stop_recording")}},B.readAsDataURL(m)}else{d("start_recording"),D=[];let m=["video/webm","video/mp4"];for(let B of m)if(MediaRecorder.isTypeSupported(B)){b=B;break}if(b===null){console.error("No supported MediaRecorder mimeType");return}u=new MediaRecorder(E,{mimeType:b}),u.addEventListener("dataavailable",function(B){D.push(B.data)}),u.start(200)}t(8,$=!$)}let W=!1;function C(){a==="image"&&f&&t(8,$=!$),a==="image"?k():h(),!$&&E&&(E.getTracks().forEach(m=>m.stop()),t(5,n.srcObject=null,n),t(9,W=!1))}f&&a==="image"&&window.setInterval(()=>{n&&!s&&k()},500);let H=!1;function he(m){m.preventDefault(),m.stopPropagation(),t(10,H=!1)}function pe(m){ln[m?"unshift":"push"](()=>{n=m,t(5,n)})}const be=async()=>p(),ve=()=>t(10,H=!0),we=()=>t(10,H=!1);return i.$$set=m=>{"streaming"in m&&t(0,f=m.streaming),"pending"in m&&t(15,s=m.pending),"root"in m&&t(16,g=m.root),"mode"in m&&t(1,a=m.mode),"mirror_webcam"in m&&t(2,_=m.mirror_webcam),"include_audio"in m&&t(17,w=m.include_audio),"i18n"in m&&t(3,I=m.i18n),"upload"in m&&t(18,M=m.upload)},[f,a,_,I,Te,n,l,r,$,W,H,v,p,C,he,s,g,w,M,pe,be,ve,we]}class yn extends en{constructor(e){super(),an(this,e,In,$n,cn,{streaming:0,pending:15,root:16,mode:1,mirror_webcam:2,include_audio:17,i18n:3,upload:18,click_outside:4},null,[-1,-1])}get streaming(){return this.$$.ctx[0]}set streaming(e){this.$$set({streaming:e}),V()}get pending(){return this.$$.ctx[15]}set pending(e){this.$$set({pending:e}),V()}get root(){return this.$$.ctx[16]}set root(e){this.$$set({root:e}),V()}get mode(){return this.$$.ctx[1]}set mode(e){this.$$set({mode:e}),V()}get mirror_webcam(){return this.$$.ctx[2]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),V()}get include_audio(){return this.$$.ctx[17]}set include_audio(e){this.$$set({include_audio:e}),V()}get i18n(){return this.$$.ctx[3]}set i18n(e){this.$$set({i18n:e}),V()}get upload(){return this.$$.ctx[18]}set upload(e){this.$$set({upload:e}),V()}get click_outside(){return Te}}const Cn=yn,{SvelteComponent:qn,attr:Sn,create_component:Dn,destroy_component:En,detach:Wn,element:zn,init:Mn,insert:Bn,mount_component:Rn,noop:Tn,safe_not_equal:Un,transition_in:jn,transition_out:Nn}=window.__gradio__svelte__internal,{createEventDispatcher:Ln}=window.__gradio__svelte__internal;function An(i){let e,t,n;return t=new Ze({props:{Icon:xe,label:"Remove Image"}}),t.$on("click",i[1]),{c(){e=zn("div"),Dn(t.$$.fragment),Sn(e,"class","svelte-s6ybro")},m(l,r){Bn(l,e,r),Rn(t,e,null),n=!0},p:Tn,i(l){n||(jn(t.$$.fragment,l),n=!0)},o(l){Nn(t.$$.fragment,l),n=!1},d(l){l&&Wn(e),En(t)}}}function Hn(i){const e=Ln();return[e,n=>{e("remove_image"),n.stopPropagation()}]}class On extends qn{constructor(e){super(),Mn(this,e,Hn,An,Un,{})}}const{SvelteComponent:Pn,add_flush_callback:We,append:oe,attr:se,bind:ze,binding_callbacks:fe,bubble:De,check_outros:ce,create_component:G,create_slot:Fn,destroy_component:J,detach:de,element:Me,empty:Vn,flush:j,get_all_dirty_from_scope:Gn,get_slot_changes:Jn,group_outros:ue,init:Kn,insert:me,listen:Qn,mount_component:K,noop:Xn,safe_not_equal:Yn,space:ae,toggle_class:ge,transition_in:q,transition_out:R,update_slot_base:Zn}=window.__gradio__svelte__internal,{createEventDispatcher:xn,tick:el}=window.__gradio__svelte__internal;function Ve(i){let e,t;return e=new On({}),e.$on("remove_image",i[25]),{c(){G(e.$$.fragment)},m(n,l){K(e,n,l),t=!0},p:Xn,i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ge(i){let e;const t=i[24].default,n=Fn(t,i,i[36],null);return{c(){n&&n.c()},m(l,r){n&&n.m(l,r),e=!0},p(l,r){n&&n.p&&(!e||r[1]&32)&&Zn(n,t,l,l[36],e?Jn(t,l[36],r,null):Gn(l[36]),null)},i(l){e||(q(n,l),e=!0)},o(l){R(n,l),e=!1},d(l){n&&n.d(l)}}}function tl(i){let e,t,n=i[1]===null&&Ge(i);return{c(){n&&n.c(),e=Vn()},m(l,r){n&&n.m(l,r),me(l,e,r),t=!0},p(l,r){l[1]===null?n?(n.p(l,r),r[0]&2&&q(n,1)):(n=Ge(l),n.c(),q(n,1),n.m(e.parentNode,e)):n&&(ue(),R(n,1,1,()=>{n=null}),ce())},i(l){t||(q(n),t=!0)},o(l){R(n),t=!1},d(l){l&&de(e),n&&n.d(l)}}}function nl(i){let e,t,n,l,r;return t=new st({props:{src:i[1].url,alt:i[1].alt_text}}),{c(){e=Me("div"),G(t.$$.fragment),se(e,"class","image-frame svelte-fvv6"),ge(e,"selectable",i[7])},m(o,f){me(o,e,f),K(t,e,null),n=!0,l||(r=Qn(e,"click",i[21]),l=!0)},p(o,f){const s={};f[0]&2&&(s.src=o[1].url),f[0]&2&&(s.alt=o[1].alt_text),t.$set(s),(!n||f[0]&128)&&ge(e,"selectable",o[7])},i(o){n||(q(t.$$.fragment,o),n=!0)},o(o){R(t.$$.fragment,o),n=!1},d(o){o&&de(e),J(t),l=!1,r()}}}function ll(i){let e,t;return e=new Cn({props:{root:i[8],mirror_webcam:i[6],streaming:i[5],mode:"image",include_audio:!1,i18n:i[9],upload:i[11]}}),e.$on("capture",i[30]),e.$on("stream",i[31]),e.$on("error",i[32]),e.$on("drag",i[33]),e.$on("upload",i[34]),{c(){G(e.$$.fragment)},m(n,l){K(e,n,l),t=!0},p(n,l){const r={};l[0]&256&&(r.root=n[8]),l[0]&64&&(r.mirror_webcam=n[6]),l[0]&32&&(r.streaming=n[5]),l[0]&512&&(r.i18n=n[9]),l[0]&2048&&(r.upload=n[11]),e.$set(r)},i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Je(i){let e,t,n;function l(o){i[35](o)}let r={sources:i[4],handle_clear:i[18],handle_select:i[22]};return i[0]!==void 0&&(r.active_source=i[0]),e=new lt({props:r}),fe.push(()=>ze(e,"active_source",l)),{c(){G(e.$$.fragment)},m(o,f){K(e,o,f),n=!0},p(o,f){const s={};f[0]&16&&(s.sources=o[4]),!t&&f[0]&1&&(t=!0,s.active_source=o[0],We(()=>t=!1)),e.$set(s)},i(o){n||(q(e.$$.fragment,o),n=!0)},o(o){R(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function il(i){let e,t,n,l,r,o,f,s,g,a,_,w,I=i[4].length>1||i[4].includes("clipboard"),M;e=new et({props:{show_label:i[3],Icon:tt,label:i[2]||"Image"}});let d=i[1]?.url&&!i[15]&&Ve(i);function v(u){i[27](u)}function p(u){i[28](u)}let k={hidden:i[1]!==null||i[0]==="webcam",filetype:i[0]==="clipboard"?"clipboard":"image/*",root:i[8],max_file_size:i[10],disable_click:!i[4].includes("upload"),upload:i[11],stream_handler:i[12],$$slots:{default:[tl]},$$scope:{ctx:i}};i[13]!==void 0&&(k.uploading=i[13]),i[14]!==void 0&&(k.dragging=i[14]),o=new at({props:k}),i[26](o),fe.push(()=>ze(o,"uploading",v)),fe.push(()=>ze(o,"dragging",p)),o.$on("load",i[17]),o.$on("error",i[29]);const $=[ll,nl],D=[];function E(u,h){return u[0]==="webcam"&&(u[5]||!u[5]&&!u[1])?0:u[1]!==null&&!u[5]?1:-1}~(a=E(i))&&(_=D[a]=$[a](i));let b=I&&Je(i);return{c(){G(e.$$.fragment),t=ae(),n=Me("div"),d&&d.c(),l=ae(),r=Me("div"),G(o.$$.fragment),g=ae(),_&&_.c(),w=ae(),b&&b.c(),se(r,"class","upload-container svelte-fvv6"),ge(r,"reduced-height",i[4].length>1),se(n,"data-testid","image"),se(n,"class","image-container svelte-fvv6")},m(u,h){K(e,u,h),me(u,t,h),me(u,n,h),d&&d.m(n,null),oe(n,l),oe(n,r),K(o,r,null),oe(r,g),~a&&D[a].m(r,null),oe(n,w),b&&b.m(n,null),M=!0},p(u,h){const W={};h[0]&8&&(W.show_label=u[3]),h[0]&4&&(W.label=u[2]||"Image"),e.$set(W),u[1]?.url&&!u[15]?d?(d.p(u,h),h[0]&32770&&q(d,1)):(d=Ve(u),d.c(),q(d,1),d.m(n,l)):d&&(ue(),R(d,1,1,()=>{d=null}),ce());const C={};h[0]&3&&(C.hidden=u[1]!==null||u[0]==="webcam"),h[0]&1&&(C.filetype=u[0]==="clipboard"?"clipboard":"image/*"),h[0]&256&&(C.root=u[8]),h[0]&1024&&(C.max_file_size=u[10]),h[0]&16&&(C.disable_click=!u[4].includes("upload")),h[0]&2048&&(C.upload=u[11]),h[0]&4096&&(C.stream_handler=u[12]),h[0]&2|h[1]&32&&(C.$$scope={dirty:h,ctx:u}),!f&&h[0]&8192&&(f=!0,C.uploading=u[13],We(()=>f=!1)),!s&&h[0]&16384&&(s=!0,C.dragging=u[14],We(()=>s=!1)),o.$set(C);let H=a;a=E(u),a===H?~a&&D[a].p(u,h):(_&&(ue(),R(D[H],1,1,()=>{D[H]=null}),ce()),~a?(_=D[a],_?_.p(u,h):(_=D[a]=$[a](u),_.c()),q(_,1),_.m(r,null)):_=null),(!M||h[0]&16)&&ge(r,"reduced-height",u[4].length>1),h[0]&16&&(I=u[4].length>1||u[4].includes("clipboard")),I?b?(b.p(u,h),h[0]&16&&q(b,1)):(b=Je(u),b.c(),q(b,1),b.m(n,null)):b&&(ue(),R(b,1,1,()=>{b=null}),ce())},i(u){M||(q(e.$$.fragment,u),q(d),q(o.$$.fragment,u),q(_),q(b),M=!0)},o(u){R(e.$$.fragment,u),R(d),R(o.$$.fragment,u),R(_),R(b),M=!1},d(u){u&&(de(t),de(n)),J(e,u),d&&d.d(),i[26](null),J(o),~a&&D[a].d(),b&&b.d()}}}function rl(i,e,t){let n,{$$slots:l={},$$scope:r}=e,{value:o}=e,{label:f=void 0}=e,{show_label:s}=e,{sources:g=["upload","clipboard","webcam"]}=e,{streaming:a=!1}=e,{pending:_=!1}=e,{mirror_webcam:w}=e,{selectable:I=!1}=e,{root:M}=e,{i18n:d}=e,{max_file_size:v=null}=e,{upload:p}=e,{stream_handler:k}=e,$,D=!1,{active_source:E=null}=e;function b({detail:c}){t(1,o=c),W("upload")}function u(){t(1,o=null),W("clear"),W("change",null)}async function h(c){t(23,_=!0);const le=await $.load_files([new File([c],"webcam.png")]);t(1,o=le?.[0]||null),await el(),W(a?"stream":"change"),t(23,_=!1)}const W=xn();let C=!1;function H(c){let le=it(c);le&&W("select",{index:le,value:null})}async function he(c){switch(c){case"clipboard":$.paste_clipboard();break}}const pe=()=>{t(1,o=null),W("clear")};function be(c){fe[c?"unshift":"push"](()=>{$=c,t(16,$)})}function ve(c){D=c,t(13,D)}function we(c){C=c,t(14,C)}function m(c){De.call(this,i,c)}const B=c=>h(c.detail),P=c=>h(c.detail);function Z(c){De.call(this,i,c)}function x(c){De.call(this,i,c)}const ke=c=>h(c.detail);function Ye(c){E=c,t(0,E),t(4,g)}return i.$$set=c=>{"value"in c&&t(1,o=c.value),"label"in c&&t(2,f=c.label),"show_label"in c&&t(3,s=c.show_label),"sources"in c&&t(4,g=c.sources),"streaming"in c&&t(5,a=c.streaming),"pending"in c&&t(23,_=c.pending),"mirror_webcam"in c&&t(6,w=c.mirror_webcam),"selectable"in c&&t(7,I=c.selectable),"root"in c&&t(8,M=c.root),"i18n"in c&&t(9,d=c.i18n),"max_file_size"in c&&t(10,v=c.max_file_size),"upload"in c&&t(11,p=c.upload),"stream_handler"in c&&t(12,k=c.stream_handler),"active_source"in c&&t(0,E=c.active_source),"$$scope"in c&&t(36,r=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&17&&!E&&g&&t(0,E=g[0]),i.$$.dirty[0]&33&&t(15,n=a&&E==="webcam"),i.$$.dirty[0]&40960&&D&&!n&&t(1,o=null),i.$$.dirty[0]&16384&&W("drag",C)},[E,o,f,s,g,a,w,I,M,d,v,p,k,D,C,n,$,b,u,h,W,H,he,_,l,pe,be,ve,we,m,B,P,Z,x,ke,Ye,r]}class ol extends Pn{constructor(e){super(),Kn(this,e,rl,il,Yn,{value:1,label:2,show_label:3,sources:4,streaming:5,pending:23,mirror_webcam:6,selectable:7,root:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,active_source:0},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),j()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),j()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),j()}get sources(){return this.$$.ctx[4]}set sources(e){this.$$set({sources:e}),j()}get streaming(){return this.$$.ctx[5]}set streaming(e){this.$$set({streaming:e}),j()}get pending(){return this.$$.ctx[23]}set pending(e){this.$$set({pending:e}),j()}get mirror_webcam(){return this.$$.ctx[6]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),j()}get selectable(){return this.$$.ctx[7]}set selectable(e){this.$$set({selectable:e}),j()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),j()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),j()}get max_file_size(){return this.$$.ctx[10]}set max_file_size(e){this.$$set({max_file_size:e}),j()}get upload(){return this.$$.ctx[11]}set upload(e){this.$$set({upload:e}),j()}get stream_handler(){return this.$$.ctx[12]}set stream_handler(e){this.$$set({stream_handler:e}),j()}get active_source(){return this.$$.ctx[0]}set active_source(e){this.$$set({active_source:e}),j()}}const bl=ol;export{bl as I,Cn as W};
//# sourceMappingURL=ImageUploader-CsJu7UsH.js.map
